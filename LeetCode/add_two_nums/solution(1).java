/*
    The final solution that works for any valid input.
 */